<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>lesson4</title>
</head>
<style>
    .error {
        border: 1px solid red;
    }
</style>
<body>

    <form action="#" id="form">
        <input type="text" name="name" id="name" placeholder="Имя"><br><br>
        <input type="tel" name="tel" id="tel" placeholder="Телефон"><br><br>
        <input type="email" name="email" id="email" placeholder="Email"><br><br>
        <input type="text" name="text" id="text" placeholder="Текст"><br><br>

        <input type="submit" id="submit">
    </form>
    

    <script>

        let str = `
        One: 'Hi Mary.' Two: 'Oh, hi.'
        One: 'How are you doing?'
        Two: 'I'm doing alright. How about you?'
        One: 'Not too bad. The weather is great isn't it?'
        Two: 'Yes. It's absolutely beautiful today.'
        One: 'I wish it was like this more frequently.'
        Two: 'Me too.'
        One: 'So where are you going now?'
        Two: 'I'm going to meet a friend of mine at the department store'
        One: 'Going to do a little shopping?'
        Two: 'Yeah, I have to buy some presents for my parents.'
        One: 'What's the occasion?'
        Two: 'It's their anniversary.'
        One: 'That's great. Well, you better get going. You don't want to be late.'
        Two: 'I'll see you next time.'
        One: 'Sure.' Bye.'`;
        
        // 1. Дан большой текст, в котором для оформления прямой речи используются "  "
        // одинарные кавычки. Придумать шаблон, который заменяет одинарные кавычки на двойные.

        console.log(str.replace(/'/g, '"'));

        // 2. Улучшить шаблон так, чтобы в конструкциях типа aren't одинарная кавычка не заменялась на двойную.
                    

        // 3. *Создать форму обратной связи с полями: 
        // Имя, Телефон, E-mail, текст, кнопка Отправить. 
        // При нажатии на кнопку Отправить произвести валидацию полей следующим образом:
        // a. Имя содержит только буквы.
        // b. Телефон имеет вид +7(000)000-0000.
        // c. E-mail имеет вид mymail@mail.ru, или my.mail@mail.ru, или my-mail@mail.ru.
        // d. Текст произвольный.
        // e. Если одно из полей не прошло валидацию, необходимо выделить это поле красной рамкой и сообщить пользователю об ошибке.

        let submit = document.querySelector('#submit').addEventListener('click', (e) => {
            e.preventDefault();

            let errorMessages = document.querySelectorAll('.errorMessage');
            let errorClass = document.querySelectorAll('.error');
            if (errorMessages.length > 0) {
                errorMessages.forEach(item => {
                    item.remove();
                });
            }
            
            if (errorClass.length > 0) {
                errorClass.forEach(item => {
                    item.classList.remove('error');
                });
            }

            let name = document.querySelector('#name');
            let nameValue = name.value;
            let regExp = new RegExp(/[а-яА-Яa-zA-Z]/, 'ig');
            console.log(nameValue.search(regExp));
            
            if (nameValue.search(regExp) != 0 || (nameValue == 0) ) {
                name.classList.add("error");
                name.insertAdjacentHTML('afterend', '<div class="errorMessage">Не верно ввели!</div>');
            }

            let tel = document.querySelector('#tel');
            let telValue = tel.value;
            
            let regExp1 = new RegExp(/\+7\([0-9]{3}\)[0-9]{3}\-[0-9]{2}\-[0-9]{2}/, 'gi');
            if (telValue.search(regExp1) != 0 || (telValue == 0) ) {
                tel.classList.add("error");
                tel.insertAdjacentHTML('afterend', '<div class="errorMessage">Формат ввода: +7(000)000-0000!</div>');
            }

            let email = document.querySelector('#email');
            let emailValue = email.value;
            let regExp2 = new RegExp(/[a-z-.]+\@[a-z]+\.ru/, 'gi');
            if (emailValue.search(regExp2) != 0 || (emailValue == 0)) {
                email.classList.add("error");
                email.insertAdjacentHTML('afterend', '<div class="errorMessage">Формат ввода: mymail@mail.ru!</div>');
            }

            let text = document.querySelector('#text');
            if (text.value.length < 1 || (text.value === 0)) {
                text.classList.add("error");
                text.insertAdjacentHTML('afterend', '<div class="errorMessage">Не верно ввели!</div>');
            }
            

        })

    </script>
</body>
</html>